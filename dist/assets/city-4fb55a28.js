import{aj as it,a1 as We,a2 as Te,$ as Pt,W as lt,U as Vt,i as ot,j as ct,o as rt,c as ee,n as j,m as ue,L as ie,d as te,q as O,ak as je,S as ye,b as $,al as st,e as fe,v as ut,k as H,s as me,am as be,A as U,_ as se,an as pe,ao as dt,a as f,w as le,t as ae,ap as Ye,aq as Ot,C as $e,D as ft,ar as vt,as as ke,p as ge,at as Oe,X as ze,f as Ee,x as G,au as zt,av as Ke,aw as Ge,H as Mt,ax as Dt,ay as Nt,az as Pe,r as ht,h as Se,aA as Wt,E as gt,y as mt,z as bt,aB as Ft,aC as Ht,aD as jt,J as qe,O as Le,u as pt,I as _e,aE as Xe,aF as Yt,aG as Kt,V as qt,aH as Xt,aI as Ut,aJ as Je,aK as Zt,aL as Gt,aM as Jt,F as Qt,Q as en,aN as tn,a4 as yt,ab as xt,a5 as Q,a6 as re,aO as wt,a9 as Fe,G as he,ag as Ie,ae as nn,ah as He,ac as an,af as Qe}from"./index-ad8ab576.js";import{u as Ct,a as de,b as ln,c as kt}from"./city-fe2c42c9.js";function on(e,a,i){let r,o=0;const n=e.scrollLeft,v=i===0?1:Math.round(i*1e3/16);function d(){it(r)}function l(){e.scrollLeft+=(a-n)/v,++o<v&&(r=We(l))}return l(),d}function cn(e,a,i,r){let o,n=Te(e);const v=n<a,d=i===0?1:Math.round(i*1e3/16),l=(a-n)/d;function g(){it(o)}function c(){n+=l,(v&&n>a||!v&&n<a)&&(n=a),Pt(e,n),v&&n<a||!v&&n>a?o=We(c):r&&(o=We(r))}return c(),g}let rn=0;function Ve(){const e=lt(),{name:a="unknown"}=(e==null?void 0:e.type)||{};return`${a}-${++rn}`}function St(e,a){if(!Vt||!window.IntersectionObserver)return;const i=new IntersectionObserver(n=>{a(n[0].intersectionRatio>0)},{root:document.body}),r=()=>{e.value&&i.observe(e.value)},o=()=>{e.value&&i.unobserve(e.value)};ot(o),ct(o),rt(r)}const[sn,un]=ee("sticky"),dn={zIndex:j,position:ue("top"),container:Object,offsetTop:ie(0),offsetBottom:ie(0)};var fn=te({name:sn,props:dn,emits:["scroll","change"],setup(e,{emit:a,slots:i}){const r=O(),o=je(r),n=ye({fixed:!1,width:0,height:0,transform:0}),v=O(!1),d=$(()=>st(e.position==="top"?e.offsetTop:e.offsetBottom)),l=$(()=>{if(v.value)return;const{fixed:u,height:k,width:b}=n;if(u)return{width:`${b}px`,height:`${k}px`}}),g=$(()=>{if(!n.fixed||v.value)return;const u=fe(ut(e.zIndex),{width:`${n.width}px`,height:`${n.height}px`,[e.position]:`${d.value}px`});return n.transform&&(u.transform=`translate3d(0, ${n.transform}px, 0)`),u}),c=u=>a("scroll",{scrollTop:u,isFixed:n.fixed}),C=()=>{if(!r.value||be(r))return;const{container:u,position:k}=e,b=se(r),R=Te(window);if(n.width=b.width,n.height=b.height,k==="top")if(u){const x=se(u),V=x.bottom-d.value-n.height;n.fixed=d.value>b.top&&x.bottom>0,n.transform=V<0?V:0}else n.fixed=d.value>b.top;else{const{clientHeight:x}=document.documentElement;if(u){const V=se(u),_=x-V.top-d.value-n.height;n.fixed=x-d.value<b.bottom&&x>V.top,n.transform=_<0?-_:0}else n.fixed=x-d.value<b.bottom}c(R)};return H(()=>n.fixed,u=>a("change",u)),me("scroll",C,{target:o,passive:!0}),St(r,C),H([pe,dt],()=>{!r.value||be(r)||!n.fixed||(v.value=!0,U(()=>{const u=se(r);n.width=u.width,n.height=u.height,v.value=!1}))}),()=>{var u;return f("div",{ref:r,style:l.value},[f("div",{class:un({fixed:n.fixed&&!v.value}),style:g.value},[(u=i.default)==null?void 0:u.call(i)])])}}});const vn=le(fn),[_t,Ae]=ee("swipe"),hn={loop:ae,width:j,height:j,vertical:Boolean,autoplay:ie(0),duration:ie(500),touchable:ae,lazyRender:Boolean,initialSwipe:ie(0),indicatorColor:String,showIndicators:ae,stopPropagation:ae},It=Symbol(_t);var gn=te({name:_t,props:hn,emits:["change","dragStart","dragEnd"],setup(e,{emit:a,slots:i}){const r=O(),o=O(),n=ye({rect:null,width:0,height:0,offset:0,active:0,swiping:!1});let v=!1;const d=Ct(),{children:l,linkChildren:g}=Ye(It),c=$(()=>l.length),C=$(()=>n[e.vertical?"height":"width"]),u=$(()=>e.vertical?d.deltaY.value:d.deltaX.value),k=$(()=>n.rect?(e.vertical?n.rect.height:n.rect.width)-C.value*c.value:0),b=$(()=>C.value?Math.ceil(Math.abs(k.value)/C.value):c.value),R=$(()=>c.value*C.value),x=$(()=>(n.active+c.value)%c.value),V=$(()=>{const w=e.vertical?"vertical":"horizontal";return d.direction.value===w}),_=$(()=>{const w={transitionDuration:`${n.swiping?0:e.duration}ms`,transform:`translate${e.vertical?"Y":"X"}(${n.offset}px)`};if(C.value){const L=e.vertical?"height":"width",P=e.vertical?"width":"height";w[L]=`${R.value}px`,w[P]=e[P]?`${e[P]}px`:""}return w}),W=w=>{const{active:L}=n;return w?e.loop?Oe(L+w,-1,c.value):Oe(L+w,0,b.value):L},Z=(w,L=0)=>{let P=w*C.value;e.loop||(P=Math.min(P,-k.value));let p=L-P;return e.loop||(p=Oe(p,k.value,0)),p},m=({pace:w=0,offset:L=0,emitChange:P})=>{if(c.value<=1)return;const{active:p}=n,s=W(w),t=Z(s,L);if(e.loop){if(l[0]&&t!==k.value){const h=t<k.value;l[0].setOffset(h?R.value:0)}if(l[c.value-1]&&t!==0){const h=t>0;l[c.value-1].setOffset(h?-R.value:0)}}n.active=s,n.offset=t,P&&s!==p&&a("change",x.value)},F=()=>{n.swiping=!0,n.active<=-1?m({pace:c.value}):n.active>=c.value&&m({pace:-c.value})},D=()=>{F(),d.reset(),ke(()=>{n.swiping=!1,m({pace:-1,emitChange:!0})})},I=()=>{F(),d.reset(),ke(()=>{n.swiping=!1,m({pace:1,emitChange:!0})})};let B;const T=()=>clearTimeout(B),z=()=>{T(),+e.autoplay>0&&c.value>1&&(B=setTimeout(()=>{I(),z()},+e.autoplay))},E=(w=+e.initialSwipe)=>{if(!r.value)return;const L=()=>{var P,p;if(!be(r)){const s={width:r.value.offsetWidth,height:r.value.offsetHeight};n.rect=s,n.width=+((P=e.width)!=null?P:s.width),n.height=+((p=e.height)!=null?p:s.height)}c.value&&(w=Math.min(c.value-1,w),w===-1&&(w=c.value-1)),n.active=w,n.swiping=!0,n.offset=Z(w),l.forEach(s=>{s.setOffset(0)}),z()};be(r)?U().then(L):L()},N=()=>E(n.active);let K;const X=w=>{!e.touchable||w.touches.length>1||(d.start(w),v=!1,K=Date.now(),T(),F())},q=w=>{e.touchable&&n.swiping&&(d.move(w),V.value&&(!e.loop&&(n.active===0&&u.value>0||n.active===c.value-1&&u.value<0)||(ge(w,e.stopPropagation),m({offset:u.value}),v||(a("dragStart",{index:x.value}),v=!0))))},oe=()=>{if(!e.touchable||!n.swiping)return;const w=Date.now()-K,L=u.value/w;if((Math.abs(L)>.25||Math.abs(u.value)>C.value/2)&&V.value){const p=e.vertical?d.offsetY.value:d.offsetX.value;let s=0;e.loop?s=p>0?u.value>0?-1:1:0:s=-Math[u.value>0?"ceil":"floor"](u.value/C.value),m({pace:s,emitChange:!0})}else u.value&&m({pace:0});v=!1,n.swiping=!1,a("dragEnd",{index:x.value}),z()},ne=(w,L={})=>{F(),d.reset(),ke(()=>{let P;e.loop&&w===c.value?P=n.active===0?0:w:P=w%c.value,L.immediate?ke(()=>{n.swiping=!1}):n.swiping=!1,m({pace:P-n.active,emitChange:!0})})},xe=(w,L)=>{const P=L===x.value,p=P?{backgroundColor:e.indicatorColor}:void 0;return f("i",{style:p,class:Ae("indicator",{active:P})},null)},we=()=>{if(i.indicator)return i.indicator({active:x.value,total:c.value});if(e.showIndicators&&c.value>1)return f("div",{class:Ae("indicators",{vertical:e.vertical})},[Array(c.value).fill("").map(xe)])};return de({prev:D,next:I,state:n,resize:N,swipeTo:ne}),g({size:C,props:e,count:c,activeIndicator:x}),H(()=>e.initialSwipe,w=>E(+w)),H(c,()=>E(n.active)),H(()=>e.autoplay,z),H([pe,dt,()=>e.width,()=>e.height],N),H(Ot(),w=>{w==="visible"?z():T()}),$e(E),ft(()=>E(n.active)),vt(()=>E(n.active)),ot(T),ct(T),me("touchmove",q,{target:o}),()=>{var w;return f("div",{ref:r,class:Ae()},[f("div",{ref:o,style:_.value,class:Ae("track",{vertical:e.vertical}),onTouchstartPassive:X,onTouchend:oe,onTouchcancel:oe},[(w=i.default)==null?void 0:w.call(i)]),we()])}}});const mn=le(gn),[bn,et]=ee("tabs");var yn=te({name:bn,props:{count:ze(Number),inited:Boolean,animated:Boolean,duration:ze(j),swipeable:Boolean,lazyRender:Boolean,currentIndex:ze(Number)},emits:["change"],setup(e,{emit:a,slots:i}){const r=O(),o=d=>a("change",d),n=()=>{var d;const l=(d=i.default)==null?void 0:d.call(i);return e.animated||e.swipeable?f(mn,{ref:r,loop:!1,class:et("track"),duration:+e.duration*1e3,touchable:e.swipeable,lazyRender:e.lazyRender,showIndicators:!1,onChange:o},{default:()=>[l]}):l},v=d=>{const l=r.value;l&&l.state.active!==d&&l.swipeTo(d,{immediate:!e.inited})};return H(()=>e.currentIndex,v),$e(()=>{v(e.currentIndex)}),de({swipeRef:r}),()=>f("div",{class:et("content",{animated:e.animated||e.swipeable})},[n()])}});const[Tt,Be]=ee("tabs"),xn={type:ue("line"),color:String,border:Boolean,sticky:Boolean,shrink:Boolean,active:ie(0),duration:ie(.3),animated:Boolean,ellipsis:ae,swipeable:Boolean,scrollspy:Boolean,offsetTop:ie(0),background:String,lazyRender:ae,lineWidth:j,lineHeight:j,beforeChange:Function,swipeThreshold:ie(5),titleActiveColor:String,titleInactiveColor:String},$t=Symbol(Tt);var wn=te({name:Tt,props:xn,emits:["change","scroll","rendered","clickTab","update:active"],setup(e,{emit:a,slots:i}){let r,o,n,v,d;const l=O(),g=O(),c=O(),C=O(),u=Ve(),k=je(l),[b,R]=ln(),{children:x,linkChildren:V}=Ye($t),_=ye({inited:!1,position:"",lineStyle:{},currentIndex:-1}),W=$(()=>x.length>+e.swipeThreshold||!e.ellipsis||e.shrink),Z=$(()=>({borderColor:e.color,background:e.background})),m=(s,t)=>{var h;return(h=s.name)!=null?h:t},F=$(()=>{const s=x[_.currentIndex];if(s)return m(s,_.currentIndex)}),D=$(()=>st(e.offsetTop)),I=$(()=>e.sticky?D.value+r:0),B=s=>{const t=g.value,h=b.value;if(!W.value||!t||!h||!h[_.currentIndex])return;const y=h[_.currentIndex].$el,S=y.offsetLeft-(t.offsetWidth-y.offsetWidth)/2;v&&v(),v=on(t,S,s?0:+e.duration)},T=()=>{const s=_.inited;U(()=>{const t=b.value;if(!t||!t[_.currentIndex]||e.type!=="line"||be(l.value))return;const h=t[_.currentIndex].$el,{lineWidth:y,lineHeight:S}=e,A=h.offsetLeft+h.offsetWidth/2,M={width:Ee(y),backgroundColor:e.color,transform:`translateX(${A}px) translateX(-50%)`};if(s&&(M.transitionDuration=`${e.duration}s`),G(S)){const Y=Ee(S);M.height=Y,M.borderRadius=Y}_.lineStyle=M})},z=s=>{const t=s<_.currentIndex?-1:1;for(;s>=0&&s<x.length;){if(!x[s].disabled)return s;s+=t}},E=(s,t)=>{const h=z(s);if(!G(h))return;const y=x[h],S=m(y,h),A=_.currentIndex!==null;_.currentIndex!==h&&(_.currentIndex=h,t||B(),T()),S!==e.active&&(a("update:active",S),A&&a("change",S,y.title)),n&&!e.scrollspy&&Ke(Math.ceil(Ge(l.value)-D.value))},N=(s,t)=>{const h=x.find((S,A)=>m(S,A)===s),y=h?x.indexOf(h):0;E(y,t)},K=(s=!1)=>{if(e.scrollspy){const t=x[_.currentIndex].$el;if(t&&k.value){const h=Ge(t,k.value)-I.value;o=!0,d&&d(),d=cn(k.value,h,s?0:+e.duration,()=>{o=!1})}}},X=(s,t,h)=>{const{title:y,disabled:S}=x[t],A=m(x[t],t);S||(Mt(e.beforeChange,{args:[A],done:()=>{E(t),K()}}),Dt(s)),a("clickTab",{name:A,title:y,event:h,disabled:S})},q=s=>{n=s.isFixed,a("scroll",s)},oe=s=>{U(()=>{N(s),K(!0)})},ne=()=>{for(let s=0;s<x.length;s++){const{top:t}=se(x[s].$el);if(t>I.value)return s===0?0:s-1}return x.length-1},xe=()=>{if(e.scrollspy&&!o){const s=ne();E(s)}},we=()=>{if(e.type==="line"&&x.length)return f("div",{class:Be("line"),style:_.lineStyle},null)},w=()=>{var s,t,h;const{type:y,border:S,sticky:A}=e,M=[f("div",{ref:A?void 0:c,class:[Be("wrap"),{[zt]:y==="line"&&S}]},[f("div",{ref:g,role:"tablist",class:Be("nav",[y,{shrink:e.shrink,complete:W.value}]),style:Z.value,"aria-orientation":"horizontal"},[(s=i["nav-left"])==null?void 0:s.call(i),x.map(Y=>Y.renderTitle(X)),we(),(t=i["nav-right"])==null?void 0:t.call(i)])]),(h=i["nav-bottom"])==null?void 0:h.call(i)];return A?f("div",{ref:c},[M]):M},L=()=>{T(),U(()=>{var s,t;B(!0),(t=(s=C.value)==null?void 0:s.swipeRef.value)==null||t.resize()})};H(()=>[e.color,e.duration,e.lineWidth,e.lineHeight],T),H(pe,L),H(()=>e.active,s=>{s!==F.value&&N(s)}),H(()=>x.length,()=>{_.inited&&(N(e.active),T(),U(()=>{B(!0)}))});const P=()=>{N(e.active,!0),U(()=>{_.inited=!0,c.value&&(r=se(c.value).height),B(!0)})},p=(s,t)=>a("rendered",s,t);return de({resize:L,scrollTo:oe}),ft(T),vt(T),rt(P),St(l,T),me("scroll",xe,{target:k,passive:!0}),V({id:u,props:e,setLine:T,scrollable:W,onRendered:p,currentName:F,setTitleRefs:R,scrollIntoView:B}),()=>f("div",{ref:l,class:Be([e.type])},[e.sticky?f(vn,{container:l.value,offsetTop:D.value,onScroll:q},{default:()=>[w()]}):w(),f(yn,{ref:C,count:x.length,inited:_.inited,animated:e.animated,duration:e.duration,swipeable:e.swipeable,lazyRender:e.lazyRender,currentIndex:_.currentIndex,onChange:E},{default:()=>{var s;return[(s=i.default)==null?void 0:s.call(i)]}})])}});const Cn=Symbol(),[kn,tt]=ee("tab"),Sn=te({name:kn,props:{id:String,dot:Boolean,type:String,color:String,title:String,badge:j,shrink:Boolean,isActive:Boolean,disabled:Boolean,controls:String,scrollable:Boolean,activeColor:String,inactiveColor:String,showZeroBadge:ae},setup(e,{slots:a}){const i=$(()=>{const o={},{type:n,color:v,disabled:d,isActive:l,activeColor:g,inactiveColor:c}=e;v&&n==="card"&&(o.borderColor=v,d||(l?o.backgroundColor=v:o.color=v));const u=l?g:c;return u&&(o.color=u),o}),r=()=>{const o=f("span",{class:tt("text",{ellipsis:!e.scrollable})},[a.title?a.title():e.title]);return e.dot||G(e.badge)&&e.badge!==""?f(Nt,{dot:e.dot,content:e.badge,showZero:e.showZeroBadge},{default:()=>[o]}):o};return()=>f("div",{id:e.id,role:"tab",class:[tt([e.type,{grow:e.scrollable&&!e.shrink,shrink:e.shrink,active:e.isActive,disabled:e.disabled}])],style:i.value,tabindex:e.disabled?void 0:e.isActive?0:-1,"aria-selected":e.isActive,"aria-disabled":e.disabled||void 0,"aria-controls":e.controls},[r()])}}),[_n,In]=ee("swipe-item");var Tn=te({name:_n,setup(e,{slots:a}){let i;const r=ye({offset:0,inited:!1,mounted:!1}),{parent:o,index:n}=Pe(It);if(!o)return;const v=$(()=>{const g={},{vertical:c}=o.props;return o.size.value&&(g[c?"height":"width"]=`${o.size.value}px`),r.offset&&(g.transform=`translate${c?"Y":"X"}(${r.offset}px)`),g}),d=$(()=>{const{loop:g,lazyRender:c}=o.props;if(!c||i)return!0;if(!r.mounted)return!1;const C=o.activeIndicator.value,u=o.count.value-1,k=C===0&&g?u:C-1,b=C===u&&g?0:C+1;return i=n.value===C||n.value===k||n.value===b,i}),l=g=>{r.offset=g};return $e(()=>{U(()=>{r.mounted=!0})}),de({setOffset:l}),()=>{var g;return f("div",{class:In(),style:v.value},[d.value?(g=a.default)==null?void 0:g.call(a):null])}}});const $n=le(Tn),[Rn,Me]=ee("tab"),An=fe({},ht,{dot:Boolean,name:j,badge:j,title:String,disabled:Boolean,titleClass:Se,titleStyle:[String,Object],showZeroBadge:ae});var Bn=te({name:Rn,props:An,setup(e,{slots:a}){const i=Ve(),r=O(!1),o=lt(),{parent:n,index:v}=Pe($t);if(!n)return;const d=()=>{var b;return(b=e.name)!=null?b:v.value},l=()=>{r.value=!0,n.props.lazyRender&&U(()=>{n.onRendered(d(),e.title)})},g=$(()=>{const b=d()===n.currentName.value;return b&&!r.value&&l(),b}),c=O(""),C=O("");Wt(()=>{const{titleClass:b,titleStyle:R}=e;c.value=b?Ft(b):"",C.value=R&&typeof R!="string"?Ht(jt(R)):R});const u=b=>f(Sn,qe({key:i,id:`${n.id}-${v.value}`,ref:n.setTitleRefs(v.value),style:C.value,class:c.value,isActive:g.value,controls:i,scrollable:n.scrollable.value,activeColor:n.props.titleActiveColor,inactiveColor:n.props.titleInactiveColor,onClick:R=>b(o.proxy,v.value,R)},Le(n.props,["type","color","shrink"]),Le(e,["dot","badge","title","disabled","showZeroBadge"])),{title:a.title}),k=O(!g.value);return H(g,b=>{b?k.value=!1:ke(()=>{k.value=!0})}),H(()=>e.title,()=>{n.setLine(),n.scrollIntoView()}),gt(Cn,g),de({id:i,renderTitle:u}),()=>{var b;const R=`${n.id}-${v.value}`,{animated:x,swipeable:V,scrollspy:_,lazyRender:W}=n.props;if(!a.default&&!x)return;const Z=_||g.value;if(x||V)return f($n,{id:i,role:"tabpanel",class:Me("panel-wrapper",{inactive:k.value}),tabindex:g.value?0:-1,"aria-hidden":!g.value,"aria-labelledby":R},{default:()=>{var D;return[f("div",{class:Me("panel")},[(D=a.default)==null?void 0:D.call(a)])]}});const F=r.value||_||!W?(b=a.default)==null?void 0:b.call(a):null;return mt(f("div",{id:i,role:"tabpanel",class:Me("panel"),tabindex:Z?0:-1,"aria-labelledby":R},[F]),[[bt,Z]])}}});const En=le(Bn),Ln=le(wn),[Pn,ve]=ee("cell"),Rt={tag:ue("div"),icon:String,size:String,title:j,value:j,label:j,center:Boolean,isLink:Boolean,border:ae,required:Boolean,iconPrefix:String,valueClass:Se,labelClass:Se,titleClass:Se,titleStyle:null,arrowDirection:String,clickable:{type:Boolean,default:null}},Vn=fe({},Rt,ht);var On=te({name:Pn,props:Vn,setup(e,{slots:a}){const i=pt(),r=()=>{if(a.label||G(e.label))return f("div",{class:[ve("label"),e.labelClass]},[a.label?a.label():e.label])},o=()=>{var l;if(a.title||G(e.title)){const g=(l=a.title)==null?void 0:l.call(a);return Array.isArray(g)&&g.length===0?void 0:f("div",{class:[ve("title"),e.titleClass],style:e.titleStyle},[g||f("span",null,[e.title]),r()])}},n=()=>{const l=a.value||a.default;if(l||G(e.value))return f("div",{class:[ve("value"),e.valueClass]},[l?l():f("span",null,[e.value])])},v=()=>{if(a.icon)return a.icon();if(e.icon)return f(_e,{name:e.icon,class:ve("left-icon"),classPrefix:e.iconPrefix},null)},d=()=>{if(a["right-icon"])return a["right-icon"]();if(e.isLink){const l=e.arrowDirection&&e.arrowDirection!=="right"?`arrow-${e.arrowDirection}`:"arrow";return f(_e,{name:l,class:ve("right-icon")},null)}};return()=>{var l;const{tag:g,size:c,center:C,border:u,isLink:k,required:b}=e,R=(l=e.clickable)!=null?l:k,x={center:C,required:b,clickable:R,borderless:!u};return c&&(x[c]=!!c),f(g,{class:ve(x),role:R?"button":void 0,tabindex:R?0:void 0,onClick:i},{default:()=>{var V;return[v(),o(),n(),d(),(V=a.extra)==null?void 0:V.call(a)]}})}}});const At=le(On);function Bt(e){return Array.isArray(e)?!e.length:e===0?!1:!e}function zn(e,a){if(Bt(e)){if(a.required)return!1;if(a.validateEmpty===!1)return!0}return!(a.pattern&&!a.pattern.test(String(e)))}function Mn(e,a){return new Promise(i=>{const r=a.validator(e,a);if(Yt(r)){r.then(i);return}i(r)})}function nt(e,a){const{message:i}=a;return Kt(i)?i(e,a):i||""}function Dn({target:e}){e.composing=!0}function at({target:e}){e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}function Nn(e,a){const i=Xe();e.style.height="auto";let r=e.scrollHeight;if(qt(a)){const{maxHeight:o,minHeight:n}=a;o!==void 0&&(r=Math.min(r,o)),n!==void 0&&(r=Math.max(r,n))}r&&(e.style.height=`${r}px`,Ke(i))}function Wn(e){return e==="number"?{type:"text",inputmode:"decimal"}:e==="digit"?{type:"tel",inputmode:"numeric"}:{type:e}}function ce(e){return[...e].length}function De(e,a){return[...e].slice(0,a).join("")}const[Fn,J]=ee("field"),Ue={id:String,name:String,leftIcon:String,rightIcon:String,autofocus:Boolean,clearable:Boolean,maxlength:j,formatter:Function,clearIcon:ue("clear"),modelValue:ie(""),inputAlign:String,placeholder:String,autocomplete:String,autocapitalize:String,autocorrect:String,errorMessage:String,enterkeyhint:String,spellcheck:{type:Boolean,default:null},clearTrigger:ue("focus"),formatTrigger:ue("onChange"),error:{type:Boolean,default:null},disabled:{type:Boolean,default:null},readonly:{type:Boolean,default:null}},Hn=fe({},Rt,Ue,{rows:j,type:ue("text"),rules:Array,autosize:[Boolean,Object],labelWidth:j,labelClass:Se,labelAlign:String,showWordLimit:Boolean,errorMessageAlign:String,colon:{type:Boolean,default:null}});var jn=te({name:Fn,props:Hn,emits:["blur","focus","clear","keypress","clickInput","endValidate","startValidate","clickLeftIcon","clickRightIcon","update:modelValue"],setup(e,{emit:a,slots:i}){const r=Ve(),o=ye({status:"unvalidated",focused:!1,validateMessage:""}),n=O(),v=O(),d=O(),{parent:l}=Pe(Xt),g=()=>{var t;return String((t=e.modelValue)!=null?t:"")},c=t=>{if(G(e[t]))return e[t];if(l&&G(l.props[t]))return l.props[t]},C=$(()=>{const t=c("readonly");if(e.clearable&&!t){const h=g()!=="",y=e.clearTrigger==="always"||e.clearTrigger==="focus"&&o.focused;return h&&y}return!1}),u=$(()=>d.value&&i.input?d.value():e.modelValue),k=t=>t.reduce((h,y)=>h.then(()=>{if(o.status==="failed")return;let{value:S}=u;if(y.formatter&&(S=y.formatter(S,y)),!zn(S,y)){o.status="failed",o.validateMessage=nt(S,y);return}if(y.validator)return Bt(S)&&y.validateEmpty===!1?void 0:Mn(S,y).then(A=>{A&&typeof A=="string"?(o.status="failed",o.validateMessage=A):A===!1&&(o.status="failed",o.validateMessage=nt(S,y))})}),Promise.resolve()),b=()=>{o.status="unvalidated",o.validateMessage=""},R=()=>a("endValidate",{status:o.status,message:o.validateMessage}),x=(t=e.rules)=>new Promise(h=>{b(),t?(a("startValidate"),k(t).then(()=>{o.status==="failed"?(h({name:e.name,message:o.validateMessage}),R()):(o.status="passed",h(),R())})):h()}),V=t=>{if(l&&e.rules){const{validateTrigger:h}=l.props,y=Je(h).includes(t),S=e.rules.filter(A=>A.trigger?Je(A.trigger).includes(t):y);S.length&&x(S)}},_=t=>{var h;const{maxlength:y}=e;if(G(y)&&ce(t)>+y){const S=g();if(S&&ce(S)===+y)return S;const A=(h=n.value)==null?void 0:h.selectionEnd;if(o.focused&&A){const M=[...t],Y=M.length-+y;return M.splice(A-Y,Y),M.join("")}return De(t,+y)}return t},W=(t,h="onChange")=>{const y=t;t=_(t);const S=ce(y)-ce(t);if(e.type==="number"||e.type==="digit"){const M=e.type==="number";t=Zt(t,M,M)}let A=0;if(e.formatter&&h===e.formatTrigger){const{formatter:M,maxlength:Y}=e;if(t=M(t),G(Y)&&ce(t)>+Y&&(t=De(t,+Y)),n.value&&o.focused){const{selectionEnd:Re}=n.value,Ze=De(y,Re);A=ce(M(Ze))-ce(Ze)}}if(n.value&&n.value.value!==t)if(o.focused){let{selectionStart:M,selectionEnd:Y}=n.value;if(n.value.value=t,G(M)&&G(Y)){const Re=ce(t);S?(M-=S,Y-=S):A&&(M+=A,Y+=A),n.value.setSelectionRange(Math.min(M,Re),Math.min(Y,Re))}}else n.value.value=t;t!==e.modelValue&&a("update:modelValue",t)},Z=t=>{t.target.composing||W(t.target.value)},m=()=>{var t;return(t=n.value)==null?void 0:t.blur()},F=()=>{var t;return(t=n.value)==null?void 0:t.focus()},D=()=>{const t=n.value;e.type==="textarea"&&e.autosize&&t&&Nn(t,e.autosize)},I=t=>{o.focused=!0,a("focus",t),U(D),c("readonly")&&m()},B=t=>{o.focused=!1,W(g(),"onBlur"),a("blur",t),!c("readonly")&&(V("onBlur"),U(D),Jt())},T=t=>a("clickInput",t),z=t=>a("clickLeftIcon",t),E=t=>a("clickRightIcon",t),N=t=>{ge(t),a("update:modelValue",""),a("clear",t)},K=$(()=>{if(typeof e.error=="boolean")return e.error;if(l&&l.props.showError&&o.status==="failed")return!0}),X=$(()=>{const t=c("labelWidth"),h=c("labelAlign");if(t&&h!=="top")return{width:Ee(t)}}),q=t=>{t.keyCode===13&&(!(l&&l.props.submitOnEnter)&&e.type!=="textarea"&&ge(t),e.type==="search"&&m()),a("keypress",t)},oe=()=>e.id||`${r}-input`,ne=()=>o.status,xe=()=>{const t=J("control",[c("inputAlign"),{error:K.value,custom:!!i.input,"min-height":e.type==="textarea"&&!e.autosize}]);if(i.input)return f("div",{class:t,onClick:T},[i.input()]);const h={id:oe(),ref:n,name:e.name,rows:e.rows!==void 0?+e.rows:void 0,class:t,disabled:c("disabled"),readonly:c("readonly"),autofocus:e.autofocus,placeholder:e.placeholder,autocomplete:e.autocomplete,autocapitalize:e.autocapitalize,autocorrect:e.autocorrect,enterkeyhint:e.enterkeyhint,spellcheck:e.spellcheck,"aria-labelledby":e.label?`${r}-label`:void 0,onBlur:B,onFocus:I,onInput:Z,onClick:T,onChange:at,onKeypress:q,onCompositionend:at,onCompositionstart:Dn};return e.type==="textarea"?f("textarea",h,null):f("input",qe(Wn(e.type),h),null)},we=()=>{const t=i["left-icon"];if(e.leftIcon||t)return f("div",{class:J("left-icon"),onClick:z},[t?t():f(_e,{name:e.leftIcon,classPrefix:e.iconPrefix},null)])},w=()=>{const t=i["right-icon"];if(e.rightIcon||t)return f("div",{class:J("right-icon"),onClick:E},[t?t():f(_e,{name:e.rightIcon,classPrefix:e.iconPrefix},null)])},L=()=>{if(e.showWordLimit&&e.maxlength){const t=ce(g());return f("div",{class:J("word-limit")},[f("span",{class:J("word-num")},[t]),Gt("/"),e.maxlength])}},P=()=>{if(l&&l.props.showErrorMessage===!1)return;const t=e.errorMessage||o.validateMessage;if(t){const h=i["error-message"],y=c("errorMessageAlign");return f("div",{class:J("error-message",y)},[h?h({message:t}):t])}},p=()=>{const t=c("labelWidth"),h=c("labelAlign"),y=c("colon")?":":"";if(i.label)return[i.label(),y];if(e.label)return f("label",{id:`${r}-label`,for:i.input?void 0:oe(),onClick:S=>{ge(S),F()},style:h==="top"&&t?{width:Ee(t)}:void 0},[e.label+y])},s=()=>[f("div",{class:J("body")},[xe(),C.value&&f(_e,{ref:v,name:e.clearIcon,class:J("clear")},null),w(),i.button&&f("div",{class:J("button")},[i.button()])]),L(),P()];return de({blur:m,focus:F,validate:x,formValue:u,resetValidation:b,getValidationStatus:ne}),gt(Ut,{customValue:d,resetValidation:b,validateWithTrigger:V}),H(()=>e.modelValue,()=>{W(g()),b(),V("onChange"),U(D)}),$e(()=>{W(g(),e.formatTrigger),U(D)}),me("touchstart",N,{target:$(()=>{var t;return(t=v.value)==null?void 0:t.$el})}),()=>{const t=c("disabled"),h=c("labelAlign"),y=we(),S=()=>{const A=p();return h==="top"?[y,A].filter(Boolean):A||[]};return f(At,{size:e.size,class:J({error:K.value,disabled:t,[`label-${h}`]:h}),center:e.center,border:e.border,isLink:e.isLink,clickable:e.clickable,titleStyle:X.value,valueClass:J("value"),titleClass:[J("label",[h,{required:e.required}]),e.labelClass],arrowDirection:e.arrowDirection},{icon:y&&h!=="top"?()=>y:null,title:S,value:s,extra:i.extra})}}});const pn=le(jn);function Yn(){const e="A".charCodeAt(0);return Array(26).fill("").map((i,r)=>String.fromCharCode(e+r))}const[Et,Ne]=ee("index-bar"),Kn={sticky:ae,zIndex:j,teleport:[String,Object],highlightColor:String,stickyOffsetTop:en(0),indexList:{type:Array,default:Yn}},Lt=Symbol(Et);var qn=te({name:Et,props:Kn,emits:["select","change"],setup(e,{emit:a,slots:i}){const r=O(),o=O(),n=O(""),v=Ct(),d=je(r),{children:l,linkChildren:g}=Ye(Lt);let c;g({props:e});const C=$(()=>{if(G(e.zIndex))return{zIndex:+e.zIndex+1}}),u=$(()=>{if(e.highlightColor)return{color:e.highlightColor}}),k=(I,B)=>{for(let T=l.length-1;T>=0;T--){const z=T>0?B[T-1].height:0,E=e.sticky?z+e.stickyOffsetTop:0;if(I+E>=B[T].top)return T}return-1},b=I=>l.find(B=>String(B.index)===I),R=()=>{if(be(r))return;const{sticky:I,indexList:B}=e,T=Te(d.value),z=se(d),E=l.map(K=>K.getRect(d.value,z));let N=-1;if(c){const K=b(c);if(K){const X=K.getRect(d.value,z);N=k(X.top,E)}}else N=k(T,E);n.value=B[N],I&&l.forEach((K,X)=>{const{state:q,$el:oe}=K;if(X===N||X===N-1){const ne=oe.getBoundingClientRect();q.left=ne.left,q.width=ne.width}else q.left=null,q.width=null;if(X===N)q.active=!0,q.top=Math.max(e.stickyOffsetTop,E[X].top-T)+z.top;else if(X===N-1&&c===""){const ne=E[N].top-T;q.active=ne>0,q.top=ne+z.top-E[X].height}else q.active=!1}),c=""},x=()=>{U(R)};me("scroll",R,{target:d,passive:!0}),$e(x),H(()=>e.indexList,x),H(n,I=>{I&&a("change",I)});const V=()=>e.indexList.map(I=>{const B=I===n.value;return f("span",{class:Ne("index",{active:B}),style:B?u.value:void 0,"data-index":I},[I])}),_=I=>{c=String(I);const B=b(c);if(B){const T=Te(d.value),z=se(d),{offsetHeight:E}=document.documentElement;if(B.$el.scrollIntoView(),T===E-z.height){R();return}e.sticky&&e.stickyOffsetTop&&Ke(Xe()-e.stickyOffsetTop),a("select",B.index)}},W=I=>{const{index:B}=I.dataset;B&&_(B)},Z=I=>{W(I.target)};let m;const F=I=>{if(v.move(I),v.isVertical()){ge(I);const{clientX:B,clientY:T}=I.touches[0],z=document.elementFromPoint(B,T);if(z){const{index:E}=z.dataset;E&&m!==E&&(m=E,W(z))}}},D=()=>f("div",{ref:o,class:Ne("sidebar"),style:C.value,onClick:Z,onTouchstartPassive:v.start},[V()]);return de({scrollTo:_}),me("touchmove",F,{target:o}),()=>{var I;return f("div",{ref:r,class:Ne()},[e.teleport?f(Qt,{to:e.teleport},{default:()=>[D()]}):D(),(I=i.default)==null?void 0:I.call(i)])}}});const[Xn,Un]=ee("index-anchor"),Zn={index:j};var Gn=te({name:Xn,props:Zn,setup(e,{slots:a}){const i=ye({top:0,left:null,rect:{top:0,height:0},width:null,active:!1}),r=O(),{parent:o}=Pe(Lt);if(!o)return;const n=()=>i.active&&o.props.sticky,v=$(()=>{const{zIndex:l,highlightColor:g}=o.props;if(n())return fe(ut(l),{left:i.left?`${i.left}px`:void 0,width:i.width?`${i.width}px`:void 0,transform:i.top?`translate3d(0, ${i.top}px, 0)`:void 0,color:g})});return de({state:i,getRect:(l,g)=>{const c=se(r);return i.rect.height=c.height,l===window||l===document.body?i.rect.top=c.top+Xe():i.rect.top=c.top+Te(l)-g.top,i.rect}}),()=>{const l=n();return f("div",{ref:r,style:{height:l?`${i.rect.height}px`:void 0}},[f("div",{style:v.value,class:[Un({sticky:l}),{[tn]:l}]},[a.default?a.default():e.index])])}}});const Jn=le(Gn),Qn=le(qn),[ea,Ce,ta]=ee("search"),na=fe({},Ue,{label:String,shape:ue("square"),leftIcon:ue("search"),clearable:ae,actionText:String,background:String,showAction:Boolean});var aa=te({name:ea,props:na,emits:["blur","focus","clear","search","cancel","clickInput","clickLeftIcon","clickRightIcon","update:modelValue"],setup(e,{emit:a,slots:i,attrs:r}){const o=Ve(),n=O(),v=()=>{i.action||(a("update:modelValue",""),a("cancel"))},d=m=>{m.keyCode===13&&(ge(m),a("search",e.modelValue))},l=()=>e.id||`${o}-input`,g=()=>{if(i.label||e.label)return f("label",{class:Ce("label"),for:l()},[i.label?i.label():e.label])},c=()=>{if(e.showAction){const m=e.actionText||ta("cancel");return f("div",{class:Ce("action"),role:"button",tabindex:0,onClick:v},[i.action?i.action():m])}},C=()=>{var m;return(m=n.value)==null?void 0:m.blur()},u=()=>{var m;return(m=n.value)==null?void 0:m.focus()},k=m=>a("blur",m),b=m=>a("focus",m),R=m=>a("clear",m),x=m=>a("clickInput",m),V=m=>a("clickLeftIcon",m),_=m=>a("clickRightIcon",m),W=Object.keys(Ue),Z=()=>{const m=fe({},r,Le(e,W),{id:l()}),F=D=>a("update:modelValue",D);return f(pn,qe({ref:n,type:"search",class:Ce("field"),border:!1,onBlur:k,onFocus:b,onClear:R,onKeypress:d,onClickInput:x,onClickLeftIcon:V,onClickRightIcon:_,"onUpdate:modelValue":F},m),Le(i,["left-icon","right-icon"]))};return de({focus:u,blur:C}),()=>{var m;return f("div",{class:Ce({"show-action":e.showAction}),style:{background:e.background}},[(m=i.left)==null?void 0:m.call(i),f("div",{class:Ce("content",e.shape)},[g(),Z()]),c()])}}});const ia=le(aa);const la={class:"city-group"},oa={class:"list"},ca=["onClick"],ra={__name:"city-group",props:{groupData:{type:Object,default(){return{}}}},setup(e){const a=e,i=$(()=>{const v=a.groupData.cities.map(d=>d.group);return v.unshift("#"),v}),r=xt(),o=kt(),n=v=>{o.currentCity=v,r.back()};return(v,d)=>{const l=Jn,g=At,c=Qn;return Q(),re("div",la,[f(c,{sticky:!1,"highlight-color":"var(--primary-color)","index-list":i.value},{default:wt(()=>{var C;return[f(l,{index:"热门"}),Fe("div",oa,[(Q(!0),re(he,null,Ie(e.groupData.hotCities,(u,k)=>(Q(),re("div",{class:"city",onClick:b=>n(u)},nn(u.cityName),9,ca))),256))]),(Q(!0),re(he,null,Ie((C=e.groupData)==null?void 0:C.cities,u=>(Q(),re(he,{key:u},[f(l,{index:u.group},null,8,["index"]),(Q(!0),re(he,null,Ie(u.cities,k=>(Q(),He(g,{title:k.cityName,onClick:b=>n(k)},null,8,["title","onClick"]))),256))],64))),128))]}),_:1},8,["index-list"])])}}},sa=yt(ra,[["__scopeId","data-v-6bf963da"]]);const ua={class:"city top-page"},da={class:"top"},fa={class:"content"},va={__name:"city",setup(e){const a=xt(),i=O(""),r=()=>{a.back()},o=O(),n=kt();n.fetchAllCitesData();const{allCities:v}=an(n);return $(()=>v.value[o.value]),(d,l)=>{const g=ia,c=En,C=Ln;return Q(),re("div",ua,[Fe("div",da,[f(g,{modelValue:i.value,"onUpdate:modelValue":l[0]||(l[0]=u=>i.value=u),placeholder:"城市/区域/位置","show-action":"",shape:"round",onCancel:r},null,8,["modelValue"]),f(C,{active:o.value,"onUpdate:active":l[1]||(l[1]=u=>o.value=u),color:"#ff9645"},{default:wt(()=>[(Q(!0),re(he,null,Ie(Qe(v),(u,k,b)=>(Q(),He(c,{key:k,title:u.title,name:k},null,8,["title","name"]))),128))]),_:1},8,["active"])]),Fe("div",fa,[(Q(!0),re(he,null,Ie(Qe(v),(u,k,b)=>mt((Q(),He(sa,{groupData:u},null,8,["groupData"])),[[bt,k===o.value]])),256))])])}}},ma=yt(va,[["__scopeId","data-v-6edd9e91"]]);export{ma as default};
